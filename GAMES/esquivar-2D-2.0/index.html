<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ðŸš— AutoXtreme</title>
  <link rel="stylesheet" href="estilos.css" />
</head>
<body>
  <canvas id="juego"></canvas>

  <script>
    const canvas = document.getElementById("juego");
    const ctx = canvas.getContext("2d");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    // Auto
    const carro = {
      x: canvas.width / 2 - 25,
      y: canvas.height - 130,
      width: 50,
      height: 100,
      color: "#00ff44",
      velocidad: 8
    };

    //  Enemigos
    const enemigos = [];
    function crearEnemigo() {
      const ancho = 50;
      const alto = 100;
      const x = Math.random() * (canvas.width * 0.5 - ancho) + canvas.width * 0.25;
      enemigos.push({ x, y: -alto, width: ancho, height: alto, color: "red", velocidad: 6 });
    }

    //  Carretera mÃ¡s larga y ancha
    let lineas = [];
    for (let i = 0; i < 20; i++) {
      lineas.push({ x: canvas.width / 2 - 5, y: i * 120 });
    }

    function dibujarCarretera() {
      // Bordes de la carretera
      ctx.fillStyle = "#222";
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      // Carretera principal
      ctx.fillStyle = "#444";
      ctx.fillRect(canvas.width * 0.25, 0, canvas.width * 0.5, canvas.height);

      // LÃ­neas laterales blancas
      ctx.fillStyle = "#fff";
      ctx.fillRect(canvas.width * 0.25 - 10, 0, 5, canvas.height);
      ctx.fillRect(canvas.width * 0.75 + 5, 0, 5, canvas.height);

      // LÃ­neas centrales intermitentes
      ctx.fillStyle = "#ffff00";
      lineas.forEach(l => {
        ctx.fillRect(l.x, l.y, 8, 100);
        l.y += 12; // velocidad de movimiento
        if (l.y > canvas.height) l.y = -120;
      });
    }

    function dibujarCarro(c) {
      ctx.fillStyle = c.color;
      ctx.fillRect(c.x, c.y, c.width, c.height);
    }

    //  Movimiento
    const teclas = {};
    window.addEventListener("keydown", e => teclas[e.key] = true);
    window.addEventListener("keyup", e => teclas[e.key] = false);

    function moverCarro() {
      if (teclas["ArrowLeft"] && carro.x > canvas.width * 0.25)
        carro.x -= carro.velocidad;
      if (teclas["ArrowRight"] && carro.x + carro.width < canvas.width * 0.75)
        carro.x += carro.velocidad;
      if (teclas["ArrowUp"] && carro.y > 0)
        carro.y -= carro.velocidad;
      if (teclas["ArrowDown"] && carro.y + carro.height < canvas.height)
        carro.y += carro.velocidad;
    }

    //  ColisiÃ³n
    function colision(a, b) {
      return (
        a.x < b.x + b.width &&
        a.x + a.width > b.x &&
        a.y < b.y + b.height &&
        a.y + a.height > b.y
      );
    }

    //  Bucle principal
    let frame = 0;
    let juegoActivo = true;

    function loop() {
      if (!juegoActivo) return;

      ctx.clearRect(0, 0, canvas.width, canvas.height);
      dibujarCarretera();
      moverCarro();
      dibujarCarro(carro);

      // Crear enemigos cada cierto tiempo
      frame++;
      if (frame % 70 === 0) crearEnemigo();

      // Mover y dibujar enemigos
      enemigos.forEach((e, i) => {
        e.y += e.velocidad;
        dibujarCarro(e);
        if (e.y > canvas.height) enemigos.splice(i, 1);
        if (colision(carro, e)) {
          juegoActivo = false;
          alert("ðŸ’¥ Â¡Choque! Fin del juego.");
          location.reload();
        }
      });

      requestAnimationFrame(loop);
    }

    loop();
  </script>
</body>
</html>
